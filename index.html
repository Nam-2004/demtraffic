<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Traffic Counter</title>
</head>
<body>
  <h2>Lượt truy cập</h2>
  <div id="visitor-info"></div>

  <script>
    async function getVisitorInfo() {
      const res = await fetch('https://api.db-ip.com/v2/free/self');
      const data = await res.json();

      const ip = data.ip;
      const country = data.country_name;
      const region = data.region;
      const city = data.city;

      // Hiển thị thông tin
      document.getElementById('visitor-info').innerHTML = `
        <p><strong>IP:</strong> ${ip}</p>
        <p><strong>Quốc gia:</strong> ${country}</p>
        <p><strong>Thành phố:</strong> ${city}</p>
        <p><strong>Vùng:</strong> ${region}</p>
      `;

      // Gửi dữ liệu đến Google Script (hoặc server khác nếu có)
      fetch("https://script.google.com/macros/s/AKfycbz2nTX3coAO5LIlt9GUupU4X6VgA_1Z4fRtQNbE9RoMhticwL9zGs3KLbQlSwmPzi-J/exec", {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ ip, country, city, region, time: new Date().toISOString() })
      });
    }

    getVisitorInfo();
  </script>
</body>
</html>
